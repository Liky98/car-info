<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>차량 정보 파서</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>차량 정보 파서</h1>
        <textarea id="inputText" placeholder="여기에 텍스트를 입력하세요"></textarea>
        <div class="controls">
            <button id="createTableButton">테이블 생성</button>
        </div>
        <table id="resultTable">
            <thead>
                <tr>
                    <th>호차</th>
                    <th>이름</th>
                    <th>번호</th>
                    <th>차량번호</th>
                    <th>담당</th>
                </tr>
            </thead>
            <tbody id="resultBody"></tbody>
        </table>
        <div class="controls">
            <button id="sortButton">정렬</button>
        </div>
    </div>
    <script>
        const createTableButton = document.getElementById('createTableButton');
        const resultBody = document.getElementById('resultBody');
        const inputText = document.getElementById('inputText');
        const sortButton = document.getElementById('sortButton');

        // 정규표현식 기반 차량 정보 파싱
        function parseCarInfo(text) {
            const lines = text.split('\n');
            const carInfoList = [];

            const regex = /([가-힣]{2,3})\s*(\d{3}\s*\d{4}\s*\d{4})\s*차번(\d{2,3}[가-힣]\d{4})/;

            lines.forEach(line => {
                const match = line.match(regex);
                if (match) {
                    carInfoList.push({
                        name: match[1],
                        phone: match[2].replace(/\s+/g, '-'), // 공백 제거 후 하이픈으로 대체
                        carNumber: match[3]
                    });
                }
            });

            return carInfoList;
        }

        // 테이블 생성
        createTableButton.addEventListener('click', () => {
            const parsedVehicles = parseCarInfo(inputText.value.trim());
            resultBody.innerHTML = '';

            parsedVehicles.forEach(vehicle => {
                const row = document.createElement('tr');

                // 호차 선택 드롭다운
                const hochaCell = document.createElement('td');
                const hochaSelect = document.createElement('select');
                for (let i = 1; i <= 20; i++) {
                    const option = document.createElement('option');
                    option.value = `${i}호차`;
                    option.textContent = `${i}호차`;
                    hochaSelect.appendChild(option);
                }
                hochaCell.appendChild(hochaSelect);
                row.appendChild(hochaCell);

                // 이름
                const nameCell = document.createElement('td');
                nameCell.textContent = vehicle.name;
                row.appendChild(nameCell);

                // 번호
                const phoneCell = document.createElement('td');
                phoneCell.textContent = vehicle.phone;
                row.appendChild(phoneCell);

                // 차량번호
                const carNumberCell = document.createElement('td');
                carNumberCell.textContent = vehicle.carNumber;
                row.appendChild(carNumberCell);

                // 담당 팀 선택 드롭다운
                const teamCell = document.createElement('td');
                const teamSelect = document.createElement('select');
                ['연출팀', '작가팀', '카메라팀', '동시팀', '거치팀', '폴캠팀'].forEach(team => {
                    const option = document.createElement('option');
                    option.value = team;
                    option.textContent = team;
                    teamSelect.appendChild(option);
                });
                teamCell.appendChild(teamSelect);
                row.appendChild(teamCell);

                resultBody.appendChild(row);
            });
        });

        // 정렬 버튼 기능 (예: 호차 기준 정렬)
        sortButton.addEventListener('click', () => {
            const rows = Array.from(resultBody.querySelectorAll('tr'));
            rows.sort((a, b) => {
                const hochaA = a.querySelector('select').value;
                const hochaB = b.querySelector('select').value;
                return hochaA.localeCompare(hochaB, 'ko', { numeric: true });
            });
            resultBody.innerHTML = '';
            rows.forEach(row => resultBody.appendChild(row));
        });
    </script>
</body>
</html>
